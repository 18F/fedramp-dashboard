"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){function e(e,n){e.debug("fedramp module initializing"),n.$on("$stateChangeError",e.debug.bind(e)),n.$on("$stateChangeError",console.log.bind(console))}angular.module("fedramp",["ui.router","fedramp.models","fedramp.services"]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|blob|data):/)}]).run(e),e.$inject=["$log","$rootScope"]}(),function(){function e(e){e.debug("fedramp.components module initializing")}angular.module("fedramp.components",["fedramp.models","fedramp.services"]).run(e),e.$inject=["$log"]}(),function(){function e(e){e.debug("fedramp.model module initializing")}angular.module("fedramp.models",[]).run(e),e.$inject=["$log"]}(),function(){function e(e){e.debug("fedramp.services module initializing")}angular.module("fedramp.services",["fedramp.models"]).run(e),e.$inject=["$log"]}(),angular.module("fedramp").run(["$templateCache",function(e){e.put("src/fedramp/fedramp.html",'<header>\n    <div class="usa-grid">\n        <div class="usa-width-one-whole">\n            <!--<img class="header" src="img/fedramp.png"/>-->\n            <h1>FedRAMP</h1>\n        </div>\n    </div>\n</header>\n<ui-view></ui-view>\n'),e.put("src/fedramp.components/product.html",'<div class="usa-grid">\n    <a ng-click="controller.close()"><div class="usa-width-whole">Close</div></a>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-two-thirds">\n        <!-- Logo -->\n        Logo\n    </div>\n    <div class="usa-width-one-sixth">\n        <!-- Status -->\n        Status\n    </div>\n    <div class="usa-width-one-sixth">\n        {{controller.model.reuse}}\n    </div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>System Profile</strong>\n    </div>\n    <div>\n        Service Model<span ng-show="controller.model.serviceModels.length > 1">s</span>:\n        {{controller.model.serviceModels.join(\', \')}}\n    </div>\n    <div>\n        Deployment Model:\n        {{controller.model.deploymentModel}}\n    </div>\n    <div>\n        Impact Level:\n        {{controller.model.impactLevel}}\n    </div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>Contact Information</strong>\n    </div>\n    <div>POC:</div>\n    <div>E-mail:</div>\n    <div>Website:</div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>Package ID</strong>\n        <p>{{controller.model.pkgId}}</p>\n    </div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>Service Description</strong>\n    </div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>FedRAMP Compliant Detail</strong>\n    </div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>Associated Risks</strong>\n    </div>\n</div>\n<div class="usa-grid">\n    <div class="usa-width-one-whole">\n        <strong>Agencies using this service</strong>\n    </div>\n    <div class="usa-width-one-whole">\n        <ul>\n            <li ng-repeat="agency in controller.model.agencies track by $index">{{agency}}</li>\n        </ul>\n    </div>\n</div>\n'),e.put("src/fedramp.components/tile.html",'<a ng-click="controller.view()">\n    <div ng-if="controller.expand" class="usa-width-one-whole">\n        <div class="usa-grid">\n            <div class="usa-width-one-third">\n                <strong>{{ controller.model.name }}</strong>\n            </div>\n            <div class="usa-width-one-sixth">\n                <div ng-repeat="service in controller.model.serviceModel">{{ service }}</div>\n            </div>\n            <div class="usa-width-one-sixth">\n                <span>{{ controller.model.deploymentModel }}</span>\n            </div>\n            <div class="usa-width-one-sixth">\n                <span>{{ controller.model.impactLevel }}</span>\n            </div>\n            <div class="usa-width-one-twelfth">\n                <!-- Status -->\n                Status\n            </div>\n            <div class="usa-width-one-twelfth">\n                <!-- Reuses -->\n                0\n            </div>\n        </div>\n    </div>\n    <div ng-if="!controller.expand" class="usa-width-one-half">\n        <div class="usa-grid">\n            <div class="usa-width-two-thirds">\n                <!-- Logo -->\n                Logo\n            </div>\n            <div class="usa-width-one-sixth">\n                <!-- Status -->\n                Status\n            </div>\n            <div class="usa-width-one-sixth">\n                <!-- Reuses -->\n                0\n            </div>\n        </div>\n        <div class="usa-grid">\n            <div class="usa-width-one-whole">\n                <div>\n                    <strong>Service Model:</strong>\n                    {{ controller.model.serviceModel.join(\', \') }}\n                </div>\n                <div>\n                    <strong>Deployment Model:</strong>\n                    {{ controller.model.deploymentModel }}\n                </div>\n                <div>\n                    <strong>Impact Level:</strong>\n                    {{ controller.model.impactLevel }}\n                </div>\n            </div>\n        </div>\n    </div>\n</a>\n'),e.put("src/fedramp/home/agency-comparison.html",""),e.put("src/fedramp/home/agency-information.html",""),e.put("src/fedramp/home/agency.html",""),e.put("src/fedramp/home/assessor-comparison.html",""),e.put("src/fedramp/home/assessor-information.html",""),e.put("src/fedramp/home/assessor.html",""),e.put("src/fedramp/home/home.html",'<div class="usa-content">\n    <div class="usa-grid">\n        <div class="usa-width-one-third">\n            <div class="circle">\n                <p>\n                    <strong style="font-size: larger;">${{homeController.totalCostSavings()}}</strong>\n                    <div>Cost Savings</div>\n                </p>\n            </div>\n        </div>\n        <div class="usa-width-one-third">\n            <div class="circle">\n                <p>\n                    <strong style="font-size: larger;">{{homeController.totalAuthorized()}}</strong>\n                    <div>Total Authorized</div>\n                </p>\n            </div>\n        </div>\n        <div class="usa-width-one-third">\n            <div class="circle">\n                <p>\n                    <strong style="font-size: larger;">{{homeController.leveragedAtos()}}</strong>\n                    <div>Leveraged ATOs</div>\n                </p>\n            </div>\n        </div>\n    </div>\n    <div style="text-align:center;margin-top:20px;margin-bottom:20px;"> Search by </div>\n    <div ng-show="homeController.hasData()">\n        <div class="filters usa-grid">\n            <div class="usa-width-one-fourth">\n                <button id="filterByCSP"\n                        ng-click="homeController.toggleFilter(\'csp\')">CSP\n                </button>\n            </div>\n            <div class="usa-width-one-fourth">\n                <button id="filterByCSO"\n                        type="radio"\n                        ui-sref="fedramp.home.products">\n                        CSO\n                </button>\n            </div>\n            <div class="usa-width-one-fourth">\n                <button id="filterByAgency"\n                        ng-click="homeController.toggleFilter(\'agency\')">Agency\n                </button>\n            </div>\n            <div class="usa-width-one-fourth">\n                <button id="filterBy3PAO"\n                        ng-click="homeController.toggleFilter(\'3pao\')">3PAO\n                </button>\n            </div>\n        </div>\n        <div class="usa-grid" ng-show="!!homeController.filterType">\n            <div style="text-align:center;" class="usa-width-one-whole">\n                <div style="margin:0 auto;display:table;">\n                    <label for="filter">Filter using:</label>\n                    <select id="filter"\n                            ng-model="homeController.filter"\n                            ng-options="option for option in homeController.filterOptions"\n                            ng-change="homeController.applyFilter()">\n                        <option value=""></option>\n                    </select>\n                </div>\n                <a href="{{homeController.downloadUrl}}"\n                   download="{{homeController.filename()}}"\n                   ng-click="homeController.download()">\n                    Download\n                </a>\n            </div>\n        </div>\n        <div class="usa-grid">\n            <div class="usa-width-one-third">&nbsp;</div>\n            <div class="usa-width-one-twelfth">&nbsp;</div>\n            <div class="usa-width-one-third">\n                <label>\n                    <input type="checkbox" ng-model="homeController.expandTiles" />\n                    <p ng-if="homeController.expandTiles">View as tiles</p>\n                    <p ng-if="!homeController.expandTiles">View as list</p>\n                </label>\n            </div>\n        </div>\n    </div>\n</div>\n<ui-view/>\n'),e.put("src/fedramp/home/product-comparison.html",'<div class="usa-content">\n    <div class="usa-grid">\n        <div class="usa-width-one-half">\n            <product model="controller.first" on-close="controller.closeFirst" />\n        </div>\n        <div class="usa-width-one-half">\n            <product model="controller.second" on-close="controller.closeSecond" />\n        </div>\n    </div>\n</div>\n'),e.put("src/fedramp/home/product-information.html",'<div class="usa-content">\n    <div class="usa-grid">\n        <div class="usa-width-one-half">\n            <product model="controller.item" on-close="controller.close" />\n        </div>\n        <div class="usa-width-one-half">\n            <div ng-show="controller.items.length > 0">\n                <div class="usa-grid">\n                    <tile ng-repeat="model in controller.items track by $index" expand="true" model="model" />\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("src/fedramp/home/product.html","<ui-view />\n"),e.put("src/fedramp/home/products.html",'<!--<select id="filter"-->\n        <!--ng-model="controller.search.name"-->\n        <!--ng-options="option for option in controller.filterOptions"-->\n        <!--ng-change="controller.applyFilter()">-->\n    <!--<option value=""></option>-->\n<!--</select>-->\n<!--<select -->\n        <!--ng-model="controller.search.agency"-->\n        <!--ng-options="option for option in controller.agencies">-->\n    <!--<option value=""></option>-->\n<!--</select>-->\n<!--<select -->\n        <!--ng-model="controller.search.serviceModel"-->\n        <!--ng-options="option for option in controller.serviceModels">-->\n    <!--<option value=""></option>-->\n<!--</select>-->\n<!--<input type="text" ng-model="controller.search.provider"/>-->\n\n<style>\n.badge {\n    display: inline-block;\n    min-width: 10px;\n    padding: 3px 7px;\n    font-size: 12px;\n    line-height: 1;\n    color: #000;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    background-color: #e5e5e5;\n    border-radius: 10px;\n}\n</style>\n<div>\n    <select style="margin:0 auto;" ng-model="controller.selectedFilter" ng-options="option as option.name group by option.type for option in controller.filterOptionGroups" ng-change="controller.filterSelected()"></select>\n</div>\n<span ng-repeat="selected in controller.selectedNames" class="badge">\n    {{selected}} <a ng-click="controller.removeProviderFilter(selected)">(X)</a>\n</span>\n\n<span ng-repeat="selected in controller.selectedAgencies" class="badge">\n    {{selected}} <a ng-click="controller.removeAgencyFilter(selected)">(X)</a>\n</span>\n\n<span ng-repeat="selected in controller.selectedServiceModels" class="badge">\n    {{selected}} <a ng-click="controller.removeServiceModelFilter(selected)">(X)</a>\n</span>\n<tile \n ng-repeat="item in controller.products |\n\n filter:controller.filterName | \n filter:controller.filterServiceModel | \n filter:controller.filterAgency | \n filter:{provider: controller.search.provider} \n track by $index" \n \nexpand="homeController.expandTiles" model="item" />\n'),e.put("src/fedramp/home/provider-comparison.html",""),e.put("src/fedramp/home/provider-information.html",""),e.put("src/fedramp/home/provider.html","")}]),function(){function e(e,n){function t(e){return e.products()}function r(e){return e.pull().then(function(e){return e})}n.otherwise("/"),e.state("fedramp",{"abstract":!0,templateUrl:"src/fedramp/fedramp.html",resolve:{fedrampData:r}}).state("fedramp.home",{url:"/",templateUrl:"src/fedramp/home/home.html",controller:"HomeController as homeController"}).state("fedramp.home.products",{url:"/products",templateUrl:"src/fedramp/home/products.html",controller:"ProductsController as controller",resolve:{products:t}}).state("fedramp.product",{url:"/product",templateUrl:"src/fedramp/home/product.html"}).state("fedramp.product.information",{url:"/:name",templateUrl:"src/fedramp/home/product-information.html",controller:"ProductInformationController as controller"}).state("fedramp.product.comparison",{url:"/:first/versus/:second",templateUrl:"src/fedramp/home/product-comparison.html",controller:"ProductComparisonController as controller"}),t.$inject=["fedrampData"],r.$inject=["DataService"]}angular.module("fedramp").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function e(e){var n=this;n.close=function(){return n.onClose?void n.onClose():void $state.go("fedramp.home",{},{reload:!0})}}angular.module("fedramp.services").component("product",{templateUrl:"src/fedramp.components/product.html",controller:e,controllerAs:"controller",bindings:{model:"<",onClose:"<"}}),e.$inject=["$log","$state","$stateParams","helperService"]}(),function(){function e(e,n,t,r){var o=this;o.view=function(){t.name?n.go("fedramp."+o.model.type+".comparison",{first:r.slugify(t.name),second:r.slugify(o.model.name)},{reload:!0}):n.go("fedramp."+o.model.type+".information",{name:r.slugify(o.model.name)},{reload:!0})}}angular.module("fedramp.services").component("tile",{templateUrl:"src/fedramp.components/tile.html",controller:e,controllerAs:"controller",bindings:{expand:"<",model:"<"}}),e.$inject=["$log","$state","$stateParams","helperService"]}(),function(){function e(){function e(e){var n=this;n.type="agency",n.name="",n.reuses=0,n.sponsored=0,n.authorized=0,n.providers=[],n.products=[],n.assessors=[]}return e}angular.module("fedramp.models").factory("Agency",e),e.$inject=[]}(),function(){function e(){function e(e){var n=this;n.type="assessor",n.name="",n.reuses=0,n.providers=[],n.products=[],n.agencies=[],n.pointOfContact="",n.email="",n.url=""}return e}angular.module("fedramp.models").factory("Assessor",e),e.$inject=[]}(),function(){function e(){return n}function n(e){var n=this,t={Letter_Date:"letterDate",Letter_Expiration_Date:"letterExpirationDate",Authorization_Date:"authorizationDate",Authorizing_Letter_Last_Sign_Date:"authorizingLetterSignedDate",Authorizing_Agency:"authorizingAgency",Authorizing_Subagency:"authorizingSubagency",Active:"active",Include_In_Marketplace:"includeInMarketplace",Independent_Assessor:"independentAssessor"};return n.letterDate=null,n.letterExpirationDate=null,n.authorizationDate=null,n.authorizingLetterSignedDate=null,n.authorizingAgency="",n.authorizingSubagency="",n.active="",n.includeInMarketplace="",n.independentAssessor="",n.init=function(e){if(!e)return n;for(var r in e)if(e.hasOwnProperty(r)){var o=t[r];o?n[o]=e[r]:n.hasOwnProperty(r)&&(n[r]=e[r])}return n},n.init(e)}angular.module("fedramp.models").factory("AtoLetter",e)}(),function(){function e(e){function n(n){var t=this,r={Cloud_Service_Provider_Name:"name",Cloud_Service_Provider_Package:"pkg",Path:"path",Designation:"designation",Package_ID:"pkgId",Service_Model:"serviceModel",Deployment_Model:"deploymentModel",Impact_Level:"impactLevel",Original_Authorization_Date:"authorizationDate",Original_Expiration_Date:"expirationDate",Sponsoring_Agency:"sponsoringAgency",Sponsoring_Subagency:"sponsoringSubagency",Active:"active",CSP_URL:"cspUrl",Underlying_CSP_Package_ID:"underlyingCspPackages",Stage:"stage",Independent_Assessor:"independentAssessor",Leveraged_ATO_Letters:"atoLetters"};return t.name="",t.pkg="",t.pkgId="",t.path="",t.designation="",t.serviceModel=[],t.deploymentModel="",t.impactLevel="",t.authorizationDate=null,t.expirationDate=null,t.sponsoringAgency="",t.sponsoringSubagency="",t.active="",t.cspUrl="",t.underlyingCspPackages=[],t.stage="",t.independentAssessor="",t.atoLetters=[],t.init=function(n){if(n){for(var o in n)if(n.hasOwnProperty(o)){var i=r[o];if(i)if("atoLetters"===i)for(var s=0;s<n[o].length;s++)t[i].push(new e(n[o][s]));else t[i]=n[o];else if(t.hasOwnProperty(o))if("atoLetters"===o)for(var a=0;a<n[o].length;a++)t[o].push(new e(n[o][a]));else t[o]=n[o]}return t}},t.hash=function(){var e=""+t.name+t.pkg+t.pkgId+t.sponsoringAgency;return 0===e.length?null:e},t.init(n)}return n}angular.module("fedramp.models").factory("Data",e),e.$inject=["AtoLetter"]}(),function(){function e(){function e(){var e=this;e.type="product",e.name="",e.pkgId="",e.reuses=0,e.provider="",e.agencies=[],e.deploymentModel="",e.designation="",e.serviceModels=[],e.impactLevel=""}return e}angular.module("fedramp.models").factory("Product",e),e.$inject=[]}(),function(){function e(){function e(e){var n=this;n.type="provider",n.name="",n.reuses=0,n.products=[],n.deploymentModels=[],n.serviceModels=[],n.designations=[]}return e}angular.module("fedramp.models").factory("Provider",e),e.$inject=[]}(),function(){function e(){return n}function n(e){function n(){var e=new Date,n=e.getDate(),t=e.getMonth()+1,r=e.getFullYear();return 10>n&&(n="0"+n),10>t&&(t="0"+t),t+"/"+n+"/"+r}var t=this;return t.lastRefresh=null,t.init=function(e){if(e)for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n]=e[n]);return t},t.refresh=function(){return t.lastRefresh=n(),t.lastRefresh},t.clearRefresh=function(){t.lastRefresh=null},t.needsRefresh=function(){return t.lastRefresh!==n()},t.init(e)}angular.module("fedramp.services").factory("Settings",e)}(),function(){function e(e){function n(e,n){return Papa.unparse(e,n)}function t(e){for(var n=[],t=0;t<e.length;t++)n.push(r(e[t]));return n}function r(e){var n={};for(var i in e)if("function"!=typeof e[i])if(Array.isArray(e[i])){if(0===e[i].length){n[o(i)]="";continue}if("string"==typeof e[i][0])n[o(i)]=e[i].join(", ");else if("object"===_typeof(e[i][0]))for(var s=t(e[i]),a=0;a<s.length;a++){var l=s[a];for(var c in l)n[o(i)+" - "+o(c)]=l[c]}}else if("object"===_typeof(e[i])){var d=r(e[i]);for(var u in d)n[o(i)+" - "+o(u)]=d[u]}else n[o(i)]=e[i];return n}function o(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()})}var i=this;i.flatten=t,i.toCsv=n}angular.module("fedramp.services").service("CsvService",e),e.$inject=["$log"]}(),function(){function e(e,n,t,r,o){var i=this,s="https://raw.githubusercontent.com/18F/fedramp-micropurchase/master/data/data.json";i.pull=function(){return o.pull(s).then(function(e){var n=(e.meta,e.data),o=new t;o.clear();for(var i=0;i<n.length;i++){var s=new r(n[i]);o.update(s.hash(),s)}return o})}}angular.module("fedramp.services").service("DataService",e),e.$inject=["$log","StorageManager","StorageData","Data","DatasourceService"]}(),function(){function e(e){var n=this;n.pull=function(n){return e.get(n).then(function(e){return e.data})}}angular.module("fedramp.services").service("DatasourceService",e),e.$inject=["$http"]}(),function(){function e(e){var n=this;n.slugify=function(e){return e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}}angular.module("fedramp.services").service("helperService",e),e.$inject=["$log"]}(),function(){function e(e,n,t,r,o,i){function s(s){e.call(this);var a=this;return a.storageContainer="data",a.transform=function(e){return new n(e)},a.providers=function(){for(var e=[],n=[],t=a.all(),r=0;r<t.length;r++){var o=t[r];if(o.name&&!e.includes(o.name)){e.push(o.name);var s=new i;s.name=o.name,n.push(s)}}return n.forEach(function(e){e.products=a.products().filter(function(n){return n.name===e.name}),e.products.forEach(function(n){e.reuses+=n.reuses,e.products.forEach(function(n){n.serviceModels.forEach(function(n){e.serviceModels.includes(n)||e.serviceModels.push(n)})}),e.products.forEach(function(n){n.deplomentModels.forEach(function(n){e.deploymentModels.includes(n)||e.deploymentModels.push(n)})}),e.products.forEach(function(n){e.designations.includes(n.deploymentModel)||e.designations.push(n.deploymentModel)})})}),n},a.products=function(){for(var e=[],n=[],t=a.all(),r=0;r<t.length;r++){var i=t[r];if(i.pkg&&!e.includes(i.pkg)){e.push(i.pkg);var s=new o;s.name=i.pkg,s.provider=i.name,s.pkgId=i.pkgId,s.serviceModels=i.serviceModel,s.deploymentModel=i.deploymentModel,s.designation=i.designation,s.impactLevel=i.impactLevel,n.push(s)}}return n.forEach(function(e){t.forEach(function(n){n.pkg===e.name&&(n.sponsoringAgency&&!e.agencies.includes(n.sponsoringAgency)&&e.agencies.push(n.sponsoringAgency),n.sponsoringSubagency&&!e.agencies.includes(n.sponsoringSubagency)&&e.agencies.push(n.sponsoringSubagency),n.atoLetters.forEach(function(t){n.authorizationAgency&&!e.agencies.includes(t.authorizingAgency)&&e.agencies.push(n.authorizingAgency),n.authorizingSubagency&&!e.agencies.includes(t.authorizingSubagency)&&e.agencies.push(n.authorizingSubagency)}))})}),n},a.agencies=function(){for(var e=[],n=[],r=a.all(),o=0;o<r.length;o++){var i=r[o];if(i.sponsoringAgency&&!e.includes(i.sponsoringAgency)){e.push(i.sponsoringAgency);var s=new t;s.name=name,n.push(s)}if(i.sponsoringSubagency&&!e.includes(i.sponsoringSubagency)){e.push(i.sponsoringSubagency);var l=new t;l.name=name,n.push(l)}}for(var c=0;c<r.length;c++)for(var d=r[c],u=0;u<d.atoLetters.length;u++){var p=d.atoLetters[u];if(p.authorizingAgency&&!e.includes(p.authorizingAgency)){e.push(p.authorizingAgency);var g=new t;g.name=p.authorizingAgency,n.push(g)}if(p.authorizingSubagency&&!e.includes(p.authorizingSubagency)){e.push(p.authorizingSubagency);var f=new t;f.name=p.authorizingSubagency,n.push(f)}}return n.forEach(function(e){r.forEach(function(n){(n.sponsoringAgency===e.name||n.sponsoringSubagency===e.name||n.atoLetters.filter(function(n){return n.authorizingAgency===e.name||n.authorizingSubagency===e.name}))&&(e.products.includes(n.pkg)||e.products.push(n.pkg),e.providers.includes(n.name)||e.providers.push(n.name),e.assessors.includes(n.independentAssessor)||e.assessors.push(n.independentAssessor)),n.sponsoringAgency!==e.name&&n.sponsoringSubagency!==e.name||e.sponsored++,n.authorizingAgency!==e.name&&n.authorizingSubagency!==e.name||e.authorized++})}),n},a.assessors=function(){for(var e=[],n=[],t=a.all(),o=0;o<t.length;o++){var i=t[o];if(i.independentAssessor&&!e.includes(i.independentAssessor)){e.push(i.independentAssessor);var s=new r;s.name=i.independentAssessor,n.push(s)}}for(var l=0;l<t.length;l++)for(var c=t[l],d=0;d<c.atoLetters.length;d++){var u=c.atoLetters[d];if(u.independentAssessor&&!e.includes(u.independentAssessor)){e.push(u.independentAssessor);var p=new r;p.name=u.independentAssessor,n.push(p)}}return n.forEach(function(e){t.forEach(function(n){n.independentAssessor===e.name&&(e.products.includes(n.pkg)||e.products.push(n.pkg),e.providers.includes(n.name)||e.providers.push(n.name),e.agencies.includes(n.sponsoringAgency)||e.agencies.push(n.sponsoringAgency),e.agencies.includes(n.sponsoringSubagency)||e.agencies.push(n.sponsoringSubagency)),n.atoLetters.forEach(function(n){n.independentAssessor===e.name&&(e.agencies.includes(n.authorizingAgency)||e.agencies.push(n.authorizingAgency),e.agencies.includes(n.authorizingSubagency)||e.agencies.push(n.authorizingSubagency))})})}),n},a.init(s)}return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s}angular.module("fedramp.services").factory("StorageData",e),e.$inject=["StorageManager","Data","Agency","Assessor","Product","Provider"]}(),function(){function e(){return n}function n(e){function n(){return"undefined"==typeof Storage?"Local storage is not supported":null}function t(){var e=[],n=JSON.parse(localStorage.getItem(s.storageContainer));if(n)for(var t in n)e.push(s.transform(n[t]));return e}function r(e){var n=JSON.parse(localStorage.getItem(s.storageContainer));return n&&n[e]?s.transform(n[e]):null}function o(e,n){var t=JSON.parse(localStorage.getItem(s.storageContainer));t||(t={}),e&&(t[e]=n,s.transform(t[e]),localStorage.setItem(s.storageContainer,JSON.stringify(t)))}function i(){localStorage.getItem(s.storageContainer)&&localStorage.removeItem(s.storageContainer)}var s=this;return s.storageContainer="default",s.init=function(e){var t=n();if(t&&0!==t.length)throw t;return e&&e.storageContainer&&(s.storageContainer=e.storageContainer),s},s.update=function(e,n){o(e,n)},s.byId=function(e){return r(e)},s.clear=function(){i()},s.all=function(){return t()},s.transform=function(e){return e},s.init(e)}angular.module("fedramp.services").factory("StorageManager",e)}(),function(){function e(e,n){function t(t){e.call(this);var r=this;return r.storageContainer="fedramp",r.transform=function(e){return new n(e)},r.init(t)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}angular.module("fedramp.services").factory("StorageSettings",e),e.$inject=["StorageManager","Settings"]}(),function(){function e(e,n,t){function r(){o.sortBy&&0!==o.sortBy.length&&(o.filteredData=o.filteredData.sort(function(e,n){return e[o.sortBy]===n[o.sortBy]?0:o.sortAscending?e[o.sortBy]<n[o.sortBy]?-1:1:e[o.sortBy]>n[o.sortBy]?-1:1}))}var o=this,i="",s=null,a=n.all();o.title="FedRAMP",o.expandTiles=!0,o.downloadUrl="#",o.sortBy="name",o.sortAscending=!0,o.filteredData=a,o.filterType="",o.filterOptions=[],o.filter="",o.hasData=function(){return a&&a.length>0},o.applyFilter=function(e,n){if(e=e?e:o.filterType,n=n?n:o.filter,!e||!n)return o.filteredData=a,void r();var i=[];switch(e){case"csp":for(var l=0;l<a.length;l++){var c=a[l];-1!==c.name.indexOf(n)&&i.push(c)}break;case"cso":for(var d=0;d<a.length;d++){var u=a[d];-1!==u.pkg.indexOf(n)&&i.push(u)}break;case"agency":for(var p=0;p<a.length;p++){var g=a[p];if(-1!==(g.sponsoringAgency+g.sponsoringSubagency).indexOf(n))i.push(g);else for(var f=0;f<g.atoLetters.length;f++){var m=g.atoLetters[f];if(-1!==(m.authorizingAgency+m.authorizingSubagency).indexOf(n)){i.push(g);break}}}break;case"3pao":for(var v=0;v<a.length;v++){var h=a[v];-1!==h.independentAssessor.indexOf(n)&&i.push(h);for(var y=0;y<h.atoLetters.length;y++){var S=h.atoLetters[y];if(-1!==S.independentAssessor.indexOf(n)){i.push(h);break}}}}o.filteredData=i,r(),o.downloadUrl="#",s=null;var w=t.toCsv(t.flatten(i));w&&(s=new Blob([w],{type:"text/csv;charset=utf-8;"}),o.downloadUrl=window.URL.createObjectURL(s))},o.toggleFilter=function(e){if(o.filterType=e,i===e)return void(o.filterType="");i=e;var t=[];switch(e){case"csp":n.providers().forEach(function(e){return t.push(e.name)});break;case"cso":n.products().forEach(function(e){return t.push(e.name)});break;case"agency":n.agencies().forEach(function(e){return t.push(e.name)});break;case"3pao":n.assessors().forEach(function(e){return t.push(e.name)})}o.filterOptions=t},o.download=function(){e.info("Download clicked"),navigator.msSaveBlob&&s&&navigator.msSaveBlob(s,o.filename())},o.filename=function(e){e||(e=new Date);var n=e.getDate(),t=e.getMonth()+1,r=e.getFullYear();return 10>n&&(n="0"+n),10>t&&(t="0"+t),"fedramp-"+r+"-"+t+"-"+n+".csv"},o.totalAuthorized=function(){return n.products().length},o.totalCostSavings=function(){return Number(25e4*o.leveragedAtos()).toLocaleString("en")},o.leveragedAtos=function(){var e=0,t=n.all();return t.forEach(function(n){e+=o.calcCSPReuse(n,t,!1)}),e},o.calcCSPReuse=function(e,n,t){var r=e.atoLetters.length,o=n.filter(function(n){return n.underlyingCspPackages?n.underlyingCspPackages.includes(e.pkgId):void 0}),i=o.length;return o.length>0&&(i+=o.map(function(e){return e.atoLetters.length}).reduce(function(e,n){return e+n})),r+i}}angular.module("fedramp").controller("HomeController",e),e.$inject=["$log","fedrampData","CsvService"]}(),function(){function e(e,n,t,r,o){var i=this;i.items=r.products(),i.first=i.items.find(function(e){return o.slugify(e.name)===t.first}),i.second=i.items.find(function(e){return o.slugify(e.name)===t.second}),i.closeFirst=function(){n.go("fedramp."+i.second.type+".information",{name:t.second},{reload:!0})},i.closeSecond=function(){n.go("fedramp."+i.first.type+".information",{name:t.first},{reload:!0})}}angular.module("fedramp").controller("ProductComparisonController",e),e.$inject=["$log","$state","$stateParams","fedrampData","helperService"]}(),function(){function e(e,n){}angular.module("fedramp").controller("ProductController",e),e.$inject=["$log","fedrampData"]}(),function(){function e(e,n,t,r,o){var i=this;i.items=r.products(),i.item=i.items.find(function(e){return o.slugify(e.name)===t.name}),i.close=function(){n.go("fedramp.home",{},{reload:!0})}}angular.module("fedramp").controller("ProductInformationController",e),e.$inject=["$log","$state","$stateParams","fedrampData","helperService"]}(),function(){function e(e,n,t){function r(){var e={};u.products.forEach(function(n,t,r){e[n.provider]||(n.type="Product Name",u.filterOptionGroups.push({name:n.provider,type:"Provider"}),e[n.provider]=!0)});var n={};u.products.forEach(function(e,t,r){e&&e.agencies&&e.agencies.forEach(function(e){e&&!n[e]&&(u.agencies.push(e),u.filterOptionGroups.push({name:e,type:"Agency"}),n[e]=!0)})}),u.serviceModels=["IaaS","PaaS","SaaS"],u.serviceModels.forEach(function(e,n,t){u.filterOptionGroups.push({name:e,type:"Service Model"})})}function o(e,n,t){return u.selectedNames&&u.selectedNames.length>0?u.selectedNames.includes(e.provider)?e:null:e}function i(e,n,t){if(u.selectedServiceModels&&u.selectedServiceModels.length>0){var r=!1;if(u.selectedServiceModels.forEach(function(n){e.serviceModels.includes(n)&&(r=!0)}),!r)return null}return e}function s(e,n,t){if(u.selectedAgencies&&u.selectedAgencies.length>0&&e.agencies){for(var r=!1,o=0;o<u.selectedAgencies.length;o++){var i=u.selectedAgencies[o];e.agencies.includes(i)&&(console.log(i),r=!0)}if(!r)return null}return e}function a(){if(!p[u.selectedFilter.name])switch(u.selectedFilter.type){case"Provider":u.selectedNames.push(u.selectedFilter.name),p[u.selectedFilter.name]=!0;break;case"Agency":console.log("Agency case: ",u.selectedFilter),u.selectedAgencies.push(u.selectedFilter.name),p[u.selectedFilter.name]=!0;break;case"Service Model":u.selectedServiceModels.push(u.selectedFilter.name),p[u.selectedFilter.name]=!0}console.log(u.selectedAgencies)}function l(e){console.log(e);var n=u.selectedNames.indexOf(e);console.log(n),u.selectedNames.splice(n,1),p[e]=!1}function c(e){var n=u.selectedAgencies.indexOf(e);console.log(n),u.selectedAgencies.splice(n,1),p[e]=!1}function d(e){var n=u.selectedServiceModels.indexOf(e);console.log(n),u.selectedServiceModels.splice(n,1),p[e]=!1}var u=this;u.filterOptionGroups=[],u.agencies=[],u.productNames=[],u.serviceModels=[],u.selectedNames=[],u.selectedAgencies=[],u.selectedServiceModels=[],u.products=n,u.filterName=o,u.filterServiceModel=i,u.filterAgency=s,u.filterSelected=a,u.removeProviderFilter=l,u.removeAgencyFilter=c,u.removeServiceModelFilter=d;var p={};r()}angular.module("fedramp").controller("ProductsController",e),e.$inject=["$log","products","$stateParams"]}();