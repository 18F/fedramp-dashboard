<div class="fr-post-filter-metrics usa-grid-full">
    <div class="usa-width-one-whole">
        <div class="col">
            <p class="fr-large-number">
                <span class="fr-metric-icon icon-cloud"></span>
                <strong>{{controller.filteredData.length}}</strong>
                <span class="fr-metric-label">Total</span>
            </p>
        </div>
        <div class="col">
            <p class="fr-large-number">
                <span class="fr-metric-icon icon-cloud"></span>
                <strong>{{controller.compliant()}}%</strong>
                <span class="fr-metric-label">Compliant</span>
            </p>
        </div>
    </div>
    <div class="controls">
        <label>
            <input type="checkbox" ng-model="homeController.expandTiles" />
            <div class="list-view">
                <span><i class="fa fa-th-list fa-1" aria-hidden="true"></i></span>
            </div>
            <div class="grid-view">
                <span><i class="fa fa-th fa-1" aria-hidden="true"></i></span>
            </div>
        </label>
    </div>
</div>

<grid class="grid" raw-items="controller.products" on-update="controller.onUpdate(items, state)" state="controller.savedState">
    <div class="sidebar">
        <grid-filter-clear><a>Clear Filters</a></grid-filter-clear>
        <grid-search id="productNameSearch" placeholder="Search by Provider or Product" filter-func="controller.productNameSearchFilterFunc"></grid-search>
        <grid-filter id="designation" property="designation" header="Status" expanded="true" opened="true" class="grid-filter"></grid-filter>
        <grid-filter id="reuseRange" header="Reuse Range" expanded="true" opened="false" options-func="controller.reuseRangeOptions" filter-func="controller.reuseRangeFilter" class="grid-filter"></grid-filter>
        <grid-filter id="serviceModels" property="s in serviceModels" header="Service Models" expanded="true" opened="false" class="grid-filter"></grid-filter>
        <grid-filter id="deploymentModels" property="deploymentModel" header="Deployment Models" expanded="true" opened="false" class="grid-filter"></grid-filter>
        <grid-filter id="impactLevel" property="impactLevel" header="Impact Level" expanded="true" opened="false" class="grid-filter"></grid-filter>
        <grid-filter id="providers" property="provider" header="Providers" expanded="true" opened="false" class="grid-filter"></grid-filter>
    </div>
    <div class="grid grid-with-sidebar">
        <div class="fr-grid-layout fr-grid-header">
            <div class="fr-grid-layout-row">
                <div class="fr-grid-cell-name">
                    <grid-sort name="productName" property="name" header="Name" class="grid-sort" default="true"></grid-sort>
                </div>
                <div class="fr-grid-cell-service">
                    <grid-sort name="serviceModels" property="serviceModels" header="Service Models" class="grid-sort"></grid-sort>
                </div>
                <div class="fr-grid-cell-impact">
                    <grid-sort name="impactLevel" property="impactLevel" header="Impact Level" class="grid-sort"></grid-sort>
                </div>
                <div class="fr-grid-cell-icon">
                    <grid-sort name="designation" property="designation" header="Status" class="grid-sort"></grid-sort>
                </div>
                <div class="fr-grid-cell-metric">
                    <grid-sort name="reuses" property="reuses" default="-true" class="grid-sort"></grid-sort>
                </div>
            </div>
        </div>
        <tile ng-repeat="item in controller.filteredData track by $index" expand="homeController.expandTiles" model="item"></tile>
    </div>
</grid>

<div style="clear: both;">
    <download-csv content="controller.filteredData" ng-if="controller.filteredData" style="float: right;">
        <button>
            <span>Export to CSV</span>
            <i class="fa fa-download" aria-hidden="true" style="margin-left: 1rem;"></i>
        </button>
    </download-csv>
</div>
