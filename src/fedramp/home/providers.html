<grid classs="grid" raw-items="controller.providers" on-update="controller.onUpdate(items)">
    <div ng-if="controller.sidebar" class="sidebar">
        <grid-search id="searchName" property="name" placeholder="Search by Provider Name"></grid-search>
        <grid-filter id="designations" property="d in designations" header="Status" expanded="true" class="grid-filter"></grid-filter>
        <grid-filter id="reuseRange" header="Reuse Range" expanded="true" options-func="controller.reuseRangeOptions" filter-func="controller.reuseRangeFilter" class="grid-filter"></grid-filter>
        <grid-filter id="serviceModels" property="s in serviceModels" header="Service Models" expanded="true" class="grid-filter"></grid-filter>
        <grid-filter id="deploymentModels" property="d in deploymentModels" header="Deployment Models" expanded="true" class="grid-filter"></grid-filter>
        <grid-filter id="products" property="p.name in products" header="Products" expanded="true" class="grid-filter"></grid-filter>
    </div>
    <div class="grid" ng-class="{'grid-with-sidebar': controller.sidebar === true}">
        <div class="fr-grid-layout fr-grid-header">
            <div class="row fr-grid-layout-row">
                <div class="fr-grid-cell-name">
                    <span ng-if="controller.sidebar">Name</span>
                    <grid-filter ng-if="controller.sidebar === false" id="providerName" property="name" header="Name" class="grid-filter"></grid-filter>
                    <grid-sort property="name" class="grid-sort"></grid-sort>          
                </div>
                <div class="fr-grid-cell-service">
                    <span ng-if="controller.sidebar">Service Models</span>
                    <grid-filter ng-if="controller.sidebar === false" id="serviceModels" property="s in serviceModels" header="Service Models" class="grid-filter"></grid-filter>
                    <grid-sort property="serviceModels" class="grid-sort"></grid-sort>    
                </div>
                <div class="fr-grid-cell-deployment">
                    <span ng-if="controller.sidebar">Deployment Models</span>
                    <grid-filter ng-if="controller.sidebar === false" id="deploymentModels" property="d in deploymentModels" header="Deployment Models" class="grid-filter"></grid-filter>
                    <grid-sort property="deploymentModels" class="grid-sort"></grid-sort>    
                </div>
                <div class="fr-grid-cell-metric">
                    <grid-sort property="reuses" header="Reuses" class="grid-sort" default="-true"></grid-sort>    
                </div>
            </div>
        </div>
        <tile ng-repeat="item in controller.filteredData track by $index" expand="homeController.expandTiles" model="item"/>
    </div>
</grid>

<div style="clear: both;">
    <download-csv content="controller.filteredData" ng-if="controller.filteredData" style="float: right;">
        <button>
            <span>Export to CSV</span>
            <i class="fa fa-download" aria-hidden="true" style="margin-left: 1rem;"></i>
        </button>
    </download-csv>

    <!-- TODO: Remove after testing -->
    <label style="float: right; margin-right: 1rem; margin-top: 2rem;">
        Show Sidebar
        <input type="checkbox" ng-model="controller.sidebar" />
    </label>
</div>
